{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Client } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport { Message } from 'src/app/models/Message';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"messagesContainer\"];\nfunction ChatComponent_div_24_i_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.getStatusIcon(\"\"));\n  }\n}\nfunction ChatComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"div\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 23)(5, \"span\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ChatComponent_div_24_i_8_Template, 2, 1, \"i\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const message_r3 = ctx.$implicit;\n    i0.ɵɵclassProp(\"outgoing\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(message_r3.content);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 5, message_r3.timestamp));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", true);\n  }\n}\nfunction ChatComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"div\", 27);\n    i0.ɵɵelement(3, \"span\")(4, \"span\")(5, \"span\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class ChatComponent {\n  constructor() {\n    this.connected = false;\n    this.messages = [];\n    this.message = new Message();\n    this.isDarkMode = false;\n    this.sendMessage2 = new EventEmitter();\n    this.newMessage = \"\";\n    this.isTyping = false;\n  }\n  ngAfterViewChecked() {\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    try {\n      this.messagesContainer.nativeElement.scrollTop = this.messagesContainer.nativeElement.scrollHeight;\n    } catch (err) {}\n  }\n  getStatusText() {\n    if (!this.activeContact) return \"\";\n    if (this.activeContact.status === \"online\") {\n      return \"En línea\";\n    } else if (this.activeContact.status === \"typing\") {\n      return \"Escribiendo...\";\n    } else {\n      return \"Última vez hoy a las \" + this.activeContact.lastSeen;\n    }\n  }\n  getStatusIcon(status) {\n    switch (status) {\n      case \"sent\":\n        return \"check\";\n      case \"delivered\":\n        return \"done_all\";\n      case \"read\":\n        return \"done_all\";\n      default:\n        return \"schedule\";\n    }\n  }\n  formatTime(date) {\n    return date.toLocaleTimeString([], {\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    });\n  }\n  onSendMessage() {\n    if (this.newMessage.trim()) {\n      this.newMessage = \"\";\n      // Simulate typing response\n      setTimeout(() => {\n        this.isTyping = true;\n        setTimeout(() => {\n          this.isTyping = false;\n        }, 2000);\n      }, 1000);\n    }\n  }\n  ngOnInit() {\n    this.stompClient = new Client({\n      brokerURL: '',\n      webSocketFactory: () => new SockJS('http://localhost:8080/chat-websocket'),\n      debug: str => {\n        console.log(new Date(), str);\n      },\n      reconnectDelay: 5000\n    });\n    this.stompClient.onConnect = frame => {\n      this.connected = true;\n      console.log('Connected: ' + frame);\n      this.stompClient.subscribe('/topic/messages', message => {\n        console.log('Received message: ' + message.body);\n      });\n    };\n    this.stompClient.onStompError = frame => {\n      this.connected = false;\n      console.error('Broker reported error: ' + frame.headers['message']);\n      console.error('Additional details: ' + frame.body);\n    };\n    this.stompClient.onDisconnect = frame => {\n      this.connected = false;\n      console.log(`Disconnected ${!this.stompClient.connected}`);\n    };\n    this.connect();\n  }\n  connect() {\n    this.stompClient.activate();\n  }\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n    }\n  }\n  sendMessage() {\n    if (this.connected) {\n      this.stompClient.publish({\n        destination: '/app/chat',\n        body: JSON.stringify(this.message)\n      });\n      this.message = new Message();\n    } else {\n      console.error('Not connected to the server.');\n    }\n  }\n  ngOnDestroy() {\n    this.disconnect();\n  }\n  static {\n    this.ɵfac = function ChatComponent_Factory(t) {\n      return new (t || ChatComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatComponent,\n      selectors: [[\"app-chat\"]],\n      viewQuery: function ChatComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messagesContainer = _t.first);\n        }\n      },\n      inputs: {\n        activeContact: \"activeContact\",\n        isDarkMode: \"isDarkMode\"\n      },\n      outputs: {\n        sendMessage2: \"sendMessage2\"\n      },\n      decls: 37,\n      vars: 8,\n      consts: [[1, \"chat-area\"], [1, \"chat-header\"], [1, \"chat-contact-info\"], [1, \"back-button\"], [1, \"material-icons\"], [1, \"contact-avatar\"], [3, \"src\", \"alt\"], [1, \"contact-details\"], [1, \"status\"], [1, \"chat-actions\"], [1, \"messages-container\"], [\"messagesContainer\", \"\"], [1, \"messages-date\"], [\"class\", \"message-wrapper\", 3, \"outgoing\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message-wrapper\", 4, \"ngIf\"], [1, \"chat-input-area\"], [1, \"input-actions\"], [1, \"message-input\"], [\"type\", \"text\", \"placeholder\", \"Escribe un mensaje\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"send-button\", 3, \"click\"], [1, \"message-wrapper\"], [1, \"message\"], [1, \"message-content\"], [1, \"message-meta\"], [1, \"message-time\"], [\"class\", \"material-icons status-icon\", 4, \"ngIf\"], [1, \"material-icons\", \"status-icon\"], [1, \"typing-indicator\"]],\n      template: function ChatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"i\", 4);\n          i0.ɵɵtext(5, \"arrow_back\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 5);\n          i0.ɵɵelement(7, \"img\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 7)(9, \"h3\");\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"span\", 8);\n          i0.ɵɵtext(12);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"div\", 9)(14, \"i\", 4);\n          i0.ɵɵtext(15, \"videocam\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"i\", 4);\n          i0.ɵɵtext(17, \"call\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"i\", 4);\n          i0.ɵɵtext(19, \"more_vert\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"div\", 10, 11)(22, \"div\", 12);\n          i0.ɵɵtext(23, \"Hoy\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, ChatComponent_div_24_Template, 9, 7, \"div\", 13);\n          i0.ɵɵtemplate(25, ChatComponent_div_25_Template, 6, 0, \"div\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 15)(27, \"div\", 16)(28, \"i\", 4);\n          i0.ɵɵtext(29, \"emoji_emotions\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"i\", 4);\n          i0.ɵɵtext(31, \"attach_file\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"div\", 17)(33, \"input\", 18);\n          i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_33_listener($event) {\n            return ctx.newMessage = $event;\n          })(\"keyup.enter\", function ChatComponent_Template_input_keyup_enter_33_listener() {\n            return ctx.sendMessage();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 19);\n          i0.ɵɵlistener(\"click\", function ChatComponent_Template_div_click_34_listener() {\n            return ctx.sendMessage();\n          });\n          i0.ɵɵelementStart(35, \"i\", 4);\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"src\", ctx.activeContact == null ? null : ctx.activeContact.avatar, i0.ɵɵsanitizeUrl)(\"alt\", ctx.activeContact == null ? null : ctx.activeContact.name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.activeContact == null ? null : ctx.activeContact.name);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.getStatusText());\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isTyping);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.newMessage);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.newMessage ? \"send\" : \"mic\");\n        }\n      },\n      dependencies: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i1.DatePipe],\n      styles: [\".chat-area[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n    background-color: #f0f2f5;\\n}\\n\\n.chat-header[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    padding: 10px 16px;\\n    background-color: #ffffff;\\n    border-bottom: 1px solid #e0e0e0;\\n    z-index: 2;\\n}\\n\\n.chat-contact-info[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.back-button[_ngcontent-%COMP%] {\\n    display: none;\\n    margin-right: 15px;\\n}\\n\\n.back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n}\\n\\n.contact-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    width: 40px;\\n    height: 40px;\\n    border-radius: 50%;\\n    object-fit: cover;\\n    margin-right: 15px;\\n}\\n\\n.contact-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    margin: 0;\\n    font-size: 16px;\\n    font-weight: 500;\\n}\\n\\n.status[_ngcontent-%COMP%] {\\n    font-size: 13px;\\n    color: #757575;\\n}\\n\\n.chat-actions[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 20px;\\n}\\n\\n.chat-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: #54656f;\\n    cursor: pointer;\\n}\\n\\n.messages-container[_ngcontent-%COMP%] {\\n    flex: 1;\\n    padding: 16px;\\n    overflow-y: auto;\\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+CiAgPHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmMGYyZjUiIC8+CiAgPHBhdGggZD0iTTAgMCBMMjAwIDIwMCBNMjAwIDAgTDAgMjAwIiBzdHJva2U9IiNlYmVlZjIiIHN0cm9rZS13aWR0aD0iMSIgLz4KPC9zdmc+');\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n.messages-date[_ngcontent-%COMP%] {\\n    text-align: center;\\n    margin: 10px 0;\\n    font-size: 12px;\\n    color: #7d8999;\\n    background-color: rgba(225, 245, 254, 0.92);\\n    padding: 5px 12px;\\n    border-radius: 7px;\\n    width: -moz-fit-content;\\n    width: fit-content;\\n    align-self: center;\\n}\\n\\n.message-wrapper[_ngcontent-%COMP%] {\\n    display: flex;\\n    margin-bottom: 8px;\\n}\\n\\n.message-wrapper.outgoing[_ngcontent-%COMP%] {\\n    justify-content: flex-end;\\n}\\n\\n.message[_ngcontent-%COMP%] {\\n    max-width: 65%;\\n    padding: 8px 12px;\\n    border-radius: 7.5px;\\n    position: relative;\\n    box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);\\n}\\n\\n.message-wrapper[_ngcontent-%COMP%]:not(.outgoing)   .message[_ngcontent-%COMP%] {\\n    background-color: white;\\n    border-top-left-radius: 0;\\n}\\n\\n.message-wrapper.outgoing[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%] {\\n    background-color: #dcf8c6;\\n    border-top-right-radius: 0;\\n}\\n\\n.message-content[_ngcontent-%COMP%] {\\n    font-size: 14px;\\n    line-height: 19px;\\n    margin-right: 40px;\\n    word-wrap: break-word;\\n}\\n\\n.message-meta[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-end;\\n    font-size: 11px;\\n    color: #8696a0;\\n    margin-top: 2px;\\n}\\n\\n.status-icon[_ngcontent-%COMP%] {\\n    font-size: 14px;\\n    margin-left: 4px;\\n    color: #5b68f2;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%] {\\n    display: flex;\\n    padding: 6px 12px;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n    height: 8px;\\n    width: 8px;\\n    background-color: #b6b9c0;\\n    border-radius: 50%;\\n    display: inline-block;\\n    margin: 0 1px;\\n    animation: _ngcontent-%COMP%_bounce 1.3s linear infinite;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\\n    animation-delay: 0.15s;\\n}\\n\\n.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3) {\\n    animation-delay: 0.3s;\\n}\\n\\n@keyframes _ngcontent-%COMP%_bounce {\\n\\n    0%,\\n    60%,\\n    100% {\\n        transform: translateY(0);\\n    }\\n\\n    30% {\\n        transform: translateY(-4px);\\n    }\\n}\\n\\n.chat-input-area[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n    padding: 10px 16px;\\n    background-color: #f0f0f0;\\n    border-top: 1px solid #e0e0e0;\\n}\\n\\n.input-actions[_ngcontent-%COMP%] {\\n    display: flex;\\n    margin-right: 10px;\\n}\\n\\n.input-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: #54656f;\\n    margin-right: 10px;\\n    cursor: pointer;\\n}\\n\\n.message-input[_ngcontent-%COMP%] {\\n    flex: 1;\\n    background-color: white;\\n    border-radius: 21px;\\n    padding: 9px 12px;\\n}\\n\\n.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n    width: 100%;\\n    border: none;\\n    outline: none;\\n    font-size: 15px;\\n}\\n\\n.send-button[_ngcontent-%COMP%] {\\n    margin-left: 10px;\\n    width: 40px;\\n    height: 40px;\\n    border-radius: 50%;\\n    background-color: #5b68f2;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    cursor: pointer;\\n}\\n\\n.send-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: white;\\n}\\n\\n\\n\\n.dark-mode[_nghost-%COMP%]   .chat-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .chat-area[_ngcontent-%COMP%] {\\n    background-color: #121212;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .chat-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .chat-header[_ngcontent-%COMP%] {\\n    background-color: #1f1f1f;\\n    border-bottom-color: #2d2d2d;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .chat-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .chat-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .input-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .input-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: #b0b3b8;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .messages-container[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .messages-container[_ngcontent-%COMP%] {\\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+CiAgPHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiMxMjEyMTIiIC8+CiAgPHBhdGggZD0iTTAgMCBMMjAwIDIwMCBNMjAwIDAgTDAgMjAwIiBzdHJva2U9IiMyYTJhMmEiIHN0cm9rZS13aWR0aD0iMSIgLz4KPC9zdmc+');\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .messages-date[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .messages-date[_ngcontent-%COMP%] {\\n    background-color: rgba(30, 45, 60, 0.92);\\n    color: #b0b3b8;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .message-wrapper[_ngcontent-%COMP%]:not(.outgoing)   .message[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .message-wrapper[_ngcontent-%COMP%]:not(.outgoing)   .message[_ngcontent-%COMP%] {\\n    background-color: #2a2a2a;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .message-wrapper.outgoing[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .message-wrapper.outgoing[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%] {\\n    background-color: #0b3d1e;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .chat-input-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .chat-input-area[_ngcontent-%COMP%] {\\n    background-color: #1f1f1f;\\n    border-top-color: #2d2d2d;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .message-input[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .message-input[_ngcontent-%COMP%] {\\n    background-color: #2a2a2a;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n    background-color: transparent;\\n    color: #f5f5f5;\\n}\\n\\n.dark-mode[_nghost-%COMP%]   .send-button[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .send-button[_ngcontent-%COMP%] {\\n    background-color: #5b68f2;\\n}\\n\\n@media (max-width: 768px) {\\n    .back-button[_ngcontent-%COMP%] {\\n        display: block;\\n    }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGF0L2NoYXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsWUFBWTtJQUNaLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsOEJBQThCO0lBQzlCLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekIsZ0NBQWdDO0lBQ2hDLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxTQUFTO0lBQ1QsZUFBZTtJQUNmLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGVBQWU7SUFDZixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFNBQVM7QUFDYjs7QUFFQTtJQUNJLGNBQWM7SUFDZCxlQUFlO0FBQ25COztBQUVBO0lBQ0ksT0FBTztJQUNQLGFBQWE7SUFDYixnQkFBZ0I7SUFDaEIsMlZBQTJWO0lBQzNWLGFBQWE7SUFDYixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsY0FBYztJQUNkLGVBQWU7SUFDZixjQUFjO0lBQ2QsMkNBQTJDO0lBQzNDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIsdUJBQWtCO0lBQWxCLGtCQUFrQjtJQUNsQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksY0FBYztJQUNkLGlCQUFpQjtJQUNqQixvQkFBb0I7SUFDcEIsa0JBQWtCO0lBQ2xCLDJDQUEyQztBQUMvQzs7QUFFQTtJQUNJLHVCQUF1QjtJQUN2Qix5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsMEJBQTBCO0FBQzlCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLG1CQUFtQjtJQUNuQix5QkFBeUI7SUFDekIsZUFBZTtJQUNmLGNBQWM7SUFDZCxlQUFlO0FBQ25COztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxVQUFVO0lBQ1YseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQixxQkFBcUI7SUFDckIsYUFBYTtJQUNiLHNDQUFzQztBQUMxQzs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLHFCQUFxQjtBQUN6Qjs7QUFFQTs7SUFFSTs7O1FBR0ksd0JBQXdCO0lBQzVCOztJQUVBO1FBQ0ksMkJBQTJCO0lBQy9CO0FBQ0o7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekIsNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0ksYUFBYTtJQUNiLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLE9BQU87SUFDUCx1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osYUFBYTtJQUNiLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsV0FBVztJQUNYLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIseUJBQXlCO0lBQ3pCLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUVBLHFCQUFxQjtBQUNyQjtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6Qiw0QkFBNEI7QUFDaEM7O0FBRUE7O0lBRUksY0FBYztBQUNsQjs7QUFFQTtJQUNJLDJWQUEyVjtBQUMvVjs7QUFFQTtJQUNJLHdDQUF3QztJQUN4QyxjQUFjO0FBQ2xCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLDZCQUE2QjtJQUM3QixjQUFjO0FBQ2xCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0k7UUFDSSxjQUFjO0lBQ2xCO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuY2hhdC1hcmVhIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjJmNTtcclxufVxyXG5cclxuLmNoYXQtaGVhZGVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgcGFkZGluZzogMTBweCAxNnB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMGUwO1xyXG4gICAgei1pbmRleDogMjtcclxufVxyXG5cclxuLmNoYXQtY29udGFjdC1pbmZvIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uYmFjay1idXR0b24ge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICAgIG1hcmdpbi1yaWdodDogMTVweDtcclxufVxyXG5cclxuLmJhY2stYnV0dG9uIGkge1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uY29udGFjdC1hdmF0YXIgaW1nIHtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgb2JqZWN0LWZpdDogY292ZXI7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XHJcbn1cclxuXHJcbi5jb250YWN0LWRldGFpbHMgaDMge1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG5cclxuLnN0YXR1cyB7XHJcbiAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgICBjb2xvcjogIzc1NzU3NTtcclxufVxyXG5cclxuLmNoYXQtYWN0aW9ucyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZ2FwOiAyMHB4O1xyXG59XHJcblxyXG4uY2hhdC1hY3Rpb25zIGkge1xyXG4gICAgY29sb3I6ICM1NDY1NmY7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5tZXNzYWdlcy1jb250YWluZXIge1xyXG4gICAgZmxleDogMTtcclxuICAgIHBhZGRpbmc6IDE2cHg7XHJcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlNREFpSUdobGFXZG9kRDBpTWpBd0lpQjJhV1YzUW05NFBTSXdJREFnTWpBd0lESXdNQ0krQ2lBZ1BISmxZM1FnZDJsa2RHZzlJakl3TUNJZ2FHVnBaMmgwUFNJeU1EQWlJR1pwYkd3OUlpTm1NR1l5WmpVaUlDOCtDaUFnUEhCaGRHZ2daRDBpVFRBZ01DQk1NakF3SURJd01DQk5NakF3SURBZ1REQWdNakF3SWlCemRISnZhMlU5SWlObFltVmxaaklpSUhOMGNtOXJaUzEzYVdSMGFEMGlNU0lnTHo0S1BDOXpkbWMrJyk7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLm1lc3NhZ2VzLWRhdGUge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbWFyZ2luOiAxMHB4IDA7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICBjb2xvcjogIzdkODk5OTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjI1LCAyNDUsIDI1NCwgMC45Mik7XHJcbiAgICBwYWRkaW5nOiA1cHggMTJweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDdweDtcclxuICAgIHdpZHRoOiBmaXQtY29udGVudDtcclxuICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxufVxyXG5cclxuLm1lc3NhZ2Utd3JhcHBlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG59XHJcblxyXG4ubWVzc2FnZS13cmFwcGVyLm91dGdvaW5nIHtcclxuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbn1cclxuXHJcbi5tZXNzYWdlIHtcclxuICAgIG1heC13aWR0aDogNjUlO1xyXG4gICAgcGFkZGluZzogOHB4IDEycHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA3LjVweDtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGJveC1zaGFkb3c6IDAgMXB4IDAuNXB4IHJnYmEoMCwgMCwgMCwgMC4xMyk7XHJcbn1cclxuXHJcbi5tZXNzYWdlLXdyYXBwZXI6bm90KC5vdXRnb2luZykgLm1lc3NhZ2Uge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xyXG59XHJcblxyXG4ubWVzc2FnZS13cmFwcGVyLm91dGdvaW5nIC5tZXNzYWdlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNkY2Y4YzY7XHJcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDtcclxufVxyXG5cclxuLm1lc3NhZ2UtY29udGVudCB7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBsaW5lLWhlaWdodDogMTlweDtcclxuICAgIG1hcmdpbi1yaWdodDogNDBweDtcclxuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxufVxyXG5cclxuLm1lc3NhZ2UtbWV0YSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbiAgICBmb250LXNpemU6IDExcHg7XHJcbiAgICBjb2xvcjogIzg2OTZhMDtcclxuICAgIG1hcmdpbi10b3A6IDJweDtcclxufVxyXG5cclxuLnN0YXR1cy1pY29uIHtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XHJcbiAgICBjb2xvcjogIzViNjhmMjtcclxufVxyXG5cclxuLnR5cGluZy1pbmRpY2F0b3Ige1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xyXG59XHJcblxyXG4udHlwaW5nLWluZGljYXRvciBzcGFuIHtcclxuICAgIGhlaWdodDogOHB4O1xyXG4gICAgd2lkdGg6IDhweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNiNmI5YzA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBtYXJnaW46IDAgMXB4O1xyXG4gICAgYW5pbWF0aW9uOiBib3VuY2UgMS4zcyBsaW5lYXIgaW5maW5pdGU7XHJcbn1cclxuXHJcbi50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDIpIHtcclxuICAgIGFuaW1hdGlvbi1kZWxheTogMC4xNXM7XHJcbn1cclxuXHJcbi50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDMpIHtcclxuICAgIGFuaW1hdGlvbi1kZWxheTogMC4zcztcclxufVxyXG5cclxuQGtleWZyYW1lcyBib3VuY2Uge1xyXG5cclxuICAgIDAlLFxyXG4gICAgNjAlLFxyXG4gICAgMTAwJSB7XHJcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xyXG4gICAgfVxyXG5cclxuICAgIDMwJSB7XHJcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC00cHgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4uY2hhdC1pbnB1dC1hcmVhIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgcGFkZGluZzogMTBweCAxNnB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcclxuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTBlMGUwO1xyXG59XHJcblxyXG4uaW5wdXQtYWN0aW9ucyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4uaW5wdXQtYWN0aW9ucyBpIHtcclxuICAgIGNvbG9yOiAjNTQ2NTZmO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ubWVzc2FnZS1pbnB1dCB7XHJcbiAgICBmbGV4OiAxO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiAyMXB4O1xyXG4gICAgcGFkZGluZzogOXB4IDEycHg7XHJcbn1cclxuXHJcbi5tZXNzYWdlLWlucHV0IGlucHV0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxufVxyXG5cclxuLnNlbmQtYnV0dG9uIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gICAgd2lkdGg6IDQwcHg7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWI2OGYyO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnNlbmQtYnV0dG9uIGkge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4vKiBEYXJrIG1vZGUgc3R5bGVzICovXHJcbjpob3N0LWNvbnRleHQoLmRhcmstbW9kZSkgLmNoYXQtYXJlYSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTIxMjEyO1xyXG59XHJcblxyXG46aG9zdC1jb250ZXh0KC5kYXJrLW1vZGUpIC5jaGF0LWhlYWRlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWYxZjFmO1xyXG4gICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzJkMmQyZDtcclxufVxyXG5cclxuOmhvc3QtY29udGV4dCguZGFyay1tb2RlKSAuY2hhdC1hY3Rpb25zIGksXHJcbjpob3N0LWNvbnRleHQoLmRhcmstbW9kZSkgLmlucHV0LWFjdGlvbnMgaSB7XHJcbiAgICBjb2xvcjogI2IwYjNiODtcclxufVxyXG5cclxuOmhvc3QtY29udGV4dCguZGFyay1tb2RlKSAubWVzc2FnZXMtY29udGFpbmVyIHtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TURBaUlHaGxhV2RvZEQwaU1qQXdJaUIyYVdWM1FtOTRQU0l3SURBZ01qQXdJREl3TUNJK0NpQWdQSEpsWTNRZ2QybGtkR2c5SWpJd01DSWdhR1ZwWjJoMFBTSXlNREFpSUdacGJHdzlJaU14TWpFeU1USWlJQzgrQ2lBZ1BIQmhkR2dnWkQwaVRUQWdNQ0JNTWpBd0lESXdNQ0JOTWpBd0lEQWdUREFnTWpBd0lpQnpkSEp2YTJVOUlpTXlZVEpoTW1FaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJZ0x6NEtQQzl6ZG1jKycpO1xyXG59XHJcblxyXG46aG9zdC1jb250ZXh0KC5kYXJrLW1vZGUpIC5tZXNzYWdlcy1kYXRlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDQ1LCA2MCwgMC45Mik7XHJcbiAgICBjb2xvcjogI2IwYjNiODtcclxufVxyXG5cclxuOmhvc3QtY29udGV4dCguZGFyay1tb2RlKSAubWVzc2FnZS13cmFwcGVyOm5vdCgub3V0Z29pbmcpIC5tZXNzYWdlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyYTJhMmE7XHJcbn1cclxuXHJcbjpob3N0LWNvbnRleHQoLmRhcmstbW9kZSkgLm1lc3NhZ2Utd3JhcHBlci5vdXRnb2luZyAubWVzc2FnZSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGIzZDFlO1xyXG59XHJcblxyXG46aG9zdC1jb250ZXh0KC5kYXJrLW1vZGUpIC5jaGF0LWlucHV0LWFyZWEge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFmMWYxZjtcclxuICAgIGJvcmRlci10b3AtY29sb3I6ICMyZDJkMmQ7XHJcbn1cclxuXHJcbjpob3N0LWNvbnRleHQoLmRhcmstbW9kZSkgLm1lc3NhZ2UtaW5wdXQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzJhMmEyYTtcclxufVxyXG5cclxuOmhvc3QtY29udGV4dCguZGFyay1tb2RlKSAubWVzc2FnZS1pbnB1dCBpbnB1dCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIGNvbG9yOiAjZjVmNWY1O1xyXG59XHJcblxyXG46aG9zdC1jb250ZXh0KC5kYXJrLW1vZGUpIC5zZW5kLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWI2OGYyO1xyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAgIC5iYWNrLWJ1dHRvbiB7XHJcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","Client","SockJS","Message","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r4","getStatusIcon","ɵɵtemplate","ChatComponent_div_24_i_8_Template","ɵɵclassProp","message_r3","content","ɵɵpipeBind1","timestamp","ɵɵproperty","ɵɵelement","ChatComponent","constructor","connected","messages","message","isDarkMode","sendMessage2","newMessage","isTyping","ngAfterViewChecked","scrollToBottom","messagesContainer","nativeElement","scrollTop","scrollHeight","err","getStatusText","activeContact","status","lastSeen","formatTime","date","toLocaleTimeString","hour","minute","onSendMessage","trim","setTimeout","ngOnInit","stompClient","brokerURL","webSocketFactory","debug","str","console","log","Date","reconnectDelay","onConnect","frame","subscribe","body","onStompError","error","headers","onDisconnect","connect","activate","disconnect","deactivate","sendMessage","publish","destination","JSON","stringify","ngOnDestroy","selectors","viewQuery","ChatComponent_Query","rf","ctx","ChatComponent_div_24_Template","ChatComponent_div_25_Template","ɵɵlistener","ChatComponent_Template_input_ngModelChange_33_listener","$event","ChatComponent_Template_input_keyup_enter_33_listener","ChatComponent_Template_div_click_34_listener","avatar","ɵɵsanitizeUrl","name"],"sources":["C:\\Users\\Elvis Rosa\\Desktop\\Proyectos Spring\\chat\\src\\app\\components\\chat\\chat.component.ts","C:\\Users\\Elvis Rosa\\Desktop\\Proyectos Spring\\chat\\src\\app\\components\\chat\\chat.component.html"],"sourcesContent":["import { AfterViewChecked, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { Client } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport { Message } from 'src/app/models/Message';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.css']\n})\nexport class ChatComponent implements OnInit, AfterViewChecked {\n\n  private stompClient!: Client;\n  private connected: boolean = false;\n  public messages: Message[] = [];\n  public message: Message = new Message();\n\n\n  @Input() activeContact: any | undefined\n  @Input() isDarkMode = false\n  @Output() sendMessage2 = new EventEmitter<string>()\n\n  @ViewChild(\"messagesContainer\") private messagesContainer!: ElementRef\n\n  newMessage = \"\"\n  isTyping = false\n\n  ngAfterViewChecked() {\n    this.scrollToBottom()\n  }\n\n  scrollToBottom(): void {\n    try {\n      this.messagesContainer.nativeElement.scrollTop = this.messagesContainer.nativeElement.scrollHeight\n    } catch (err) { }\n  }\n\n  getStatusText(): string {\n    if (!this.activeContact) return \"\"\n\n    if (this.activeContact.status === \"online\") {\n      return \"En línea\"\n    } else if (this.activeContact.status === \"typing\") {\n      return \"Escribiendo...\"\n    } else {\n      return \"Última vez hoy a las \" + this.activeContact.lastSeen\n    }\n  }\n\n  getStatusIcon(status: string): string {\n    switch (status) {\n      case \"sent\":\n        return \"check\"\n      case \"delivered\":\n        return \"done_all\"\n      case \"read\":\n        return \"done_all\"\n      default:\n        return \"schedule\"\n    }\n  }\n\n  formatTime(date: Date): string {\n    return date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })\n  }\n\n  onSendMessage(): void {\n    if (this.newMessage.trim()) {\n      this.newMessage = \"\"\n\n      // Simulate typing response\n      setTimeout(() => {\n        this.isTyping = true\n\n        setTimeout(() => {\n          this.isTyping = false\n        }, 2000)\n      }, 1000)\n    }\n  }\n\n  ngOnInit(): void {\n    this.stompClient = new Client({\n      brokerURL: '',\n      webSocketFactory: () => new SockJS('http://localhost:8080/chat-websocket'),\n      debug: (str) => {\n        console.log(new Date(), str);\n      },\n      reconnectDelay: 5000,\n    });\n\n    this.stompClient.onConnect = (frame) => {\n      this.connected = true;\n      console.log('Connected: ' + frame);\n      this.stompClient.subscribe('/topic/messages', (message) => {\n        console.log('Received message: ' + message.body);\n      });\n    };\n\n    this.stompClient.onStompError = (frame) => {\n      this.connected = false;\n      console.error('Broker reported error: ' + frame.headers['message']);\n      console.error('Additional details: ' + frame.body);\n    };\n\n    this.stompClient.onDisconnect = (frame) => {\n      this.connected = false;\n      console.log(`Disconnected ${!this.stompClient.connected}`);\n    }\n\n    this.connect();\n  }\n\n  private connect(): void {\n    this.stompClient.activate();\n  }\n\n  private disconnect(): void {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n    }\n  }\n\n  sendMessage(): void {\n    if (this.connected) {\n      this.stompClient.publish({\n        destination: '/app/chat',\n        body: JSON.stringify(this.message),\n      });\n      this.message = new Message();\n    } else {\n      console.error('Not connected to the server.');\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.disconnect();\n  }\n\n}\n","<div class=\"chat-area\">\n    <div class=\"chat-header\">\n      <div class=\"chat-contact-info\">\n        <div class=\"back-button\">\n          <i class=\"material-icons\">arrow_back</i>\n        </div>\n        <div class=\"contact-avatar\">\n          <img [src]=\"activeContact?.avatar\" [alt]=\"activeContact?.name\" />\n        </div>\n        <div class=\"contact-details\">\n          <h3>{{ activeContact?.name }}</h3>\n          <span class=\"status\">{{ getStatusText() }}</span>\n        </div>\n      </div>\n      <div class=\"chat-actions\">\n        <i class=\"material-icons\">videocam</i>\n        <i class=\"material-icons\">call</i>\n        <i class=\"material-icons\">more_vert</i>\n      </div>\n    </div>\n    \n    <div class=\"messages-container\" #messagesContainer>\n      <div class=\"messages-date\">Hoy</div>\n      \n      <div *ngFor=\"let message of messages\" class=\"message-wrapper\" [class.outgoing]=\"true\">\n        <div class=\"message\">\n          <div class=\"message-content\">{{ message.content }}</div>\n          <div class=\"message-meta\">\n            <span class=\"message-time\">{{ message.timestamp | date }}</span>\n            <i *ngIf=\"true\" class=\"material-icons status-icon\">{{ getStatusIcon('') }}</i>\n          </div>\n        </div>\n      </div>\n      \n      <div *ngIf=\"isTyping\" class=\"message-wrapper\">\n        <div class=\"message\">\n          <div class=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"chat-input-area\">\n      <div class=\"input-actions\">\n        <i class=\"material-icons\">emoji_emotions</i>\n        <i class=\"material-icons\">attach_file</i>\n      </div>\n      <div class=\"message-input\">\n        <input \n          type=\"text\" \n          placeholder=\"Escribe un mensaje\" \n          [(ngModel)]=\"newMessage\" \n          (keyup.enter)=\"sendMessage()\"\n        />\n      </div>\n      <div class=\"send-button\" (click)=\"sendMessage()\">\n        <i class=\"material-icons\">{{ newMessage ? 'send' : 'mic' }}</i>\n      </div>\n    </div>\n  </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}