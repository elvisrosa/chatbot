{"ast":null,"code":"import { Client } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport * as i0 from \"@angular/core\";\nexport class ChatComponent {\n  constructor() {\n    this.connected = false;\n  }\n  ngOnInit() {\n    this.stompClient = new Client({\n      brokerURL: '',\n      webSocketFactory: () => new SockJS('http://localhost:8080/chat-websocket'),\n      debug: str => {\n        console.log(new Date(), str);\n      },\n      reconnectDelay: 5000\n    });\n    this.stompClient.onConnect = frame => {\n      this.connected = true;\n      console.log('Connected: ' + frame);\n      this.stompClient.subscribe('/topic/messages', message => {\n        console.log('Received message: ' + message.body);\n      });\n    };\n    this.stompClient.onStompError = frame => {\n      this.connected = false;\n      console.error('Broker reported error: ' + frame.headers['message']);\n      console.error('Additional details: ' + frame.body);\n    };\n    this.stompClient.onDisconnect = frame => {\n      this.connected = false;\n      console.log(`Disconnected ${!this.stompClient.connected}`);\n    };\n    this.connect();\n  }\n  connect() {\n    this.stompClient.activate();\n  }\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n    }\n  }\n  static {\n    this.ɵfac = function ChatComponent_Factory(t) {\n      return new (t || ChatComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatComponent,\n      selectors: [[\"app-chat\"]],\n      decls: 2,\n      vars: 0,\n      template: function ChatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"chat works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["Client","SockJS","ChatComponent","constructor","connected","ngOnInit","stompClient","brokerURL","webSocketFactory","debug","str","console","log","Date","reconnectDelay","onConnect","frame","subscribe","message","body","onStompError","error","headers","onDisconnect","connect","activate","disconnect","deactivate","selectors","decls","vars","template","ChatComponent_Template","rf","ctx","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["C:\\Users\\Elvis Rosa\\Desktop\\Proyectos Spring\\chat\\src\\app\\components\\chat.component.ts","C:\\Users\\Elvis Rosa\\Desktop\\Proyectos Spring\\chat\\src\\app\\components\\chat.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Client } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n})\nexport class ChatComponent implements OnInit {\n\n  private stompClient!: Client;\n  private connected: boolean = false;\n\n  ngOnInit(): void {\n    this.stompClient = new Client({\n      brokerURL: '',\n      webSocketFactory: () => new SockJS('http://localhost:8080/chat-websocket'),\n      debug: (str) => {\n        console.log(new Date(), str);\n      },\n      reconnectDelay: 5000,\n    });\n\n    this.stompClient.onConnect = (frame) => {\n      this.connected = true;\n      console.log('Connected: ' + frame);\n      this.stompClient.subscribe('/topic/messages', (message) => {\n        console.log('Received message: ' + message.body);\n      });\n    };\n\n    this.stompClient.onStompError = (frame) => {\n      this.connected = false;\n      console.error('Broker reported error: ' + frame.headers['message']);\n      console.error('Additional details: ' + frame.body);\n    };\n\n    this.stompClient.onDisconnect = (frame) => {\n      this.connected = false;\n      console.log(`Disconnected ${!this.stompClient.connected}`);\n    }\n\n    this.connect();\n  }\n\n  private connect(): void {\n    this.stompClient.activate();\n  }\n\n  private disconnect(): void {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n    }\n  }\n\n}\n","<p>chat works!</p>\n"],"mappings":"AACA,SAASA,MAAM,QAAQ,gBAAgB;AACvC,OAAO,KAAKC,MAAM,MAAM,eAAe;;AAMvC,OAAM,MAAOC,aAAa;EAJ1BC,YAAA;IAOU,KAAAC,SAAS,GAAY,KAAK;;EAElCC,QAAQA,CAAA;IACN,IAAI,CAACC,WAAW,GAAG,IAAIN,MAAM,CAAC;MAC5BO,SAAS,EAAE,EAAE;MACbC,gBAAgB,EAAEA,CAAA,KAAM,IAAIP,MAAM,CAAC,sCAAsC,CAAC;MAC1EQ,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACC,GAAG,CAAC,IAAIC,IAAI,EAAE,EAAEH,GAAG,CAAC;MAC9B,CAAC;MACDI,cAAc,EAAE;KACjB,CAAC;IAEF,IAAI,CAACR,WAAW,CAACS,SAAS,GAAIC,KAAK,IAAI;MACrC,IAAI,CAACZ,SAAS,GAAG,IAAI;MACrBO,OAAO,CAACC,GAAG,CAAC,aAAa,GAAGI,KAAK,CAAC;MAClC,IAAI,CAACV,WAAW,CAACW,SAAS,CAAC,iBAAiB,EAAGC,OAAO,IAAI;QACxDP,OAAO,CAACC,GAAG,CAAC,oBAAoB,GAAGM,OAAO,CAACC,IAAI,CAAC;MAClD,CAAC,CAAC;IACJ,CAAC;IAED,IAAI,CAACb,WAAW,CAACc,YAAY,GAAIJ,KAAK,IAAI;MACxC,IAAI,CAACZ,SAAS,GAAG,KAAK;MACtBO,OAAO,CAACU,KAAK,CAAC,yBAAyB,GAAGL,KAAK,CAACM,OAAO,CAAC,SAAS,CAAC,CAAC;MACnEX,OAAO,CAACU,KAAK,CAAC,sBAAsB,GAAGL,KAAK,CAACG,IAAI,CAAC;IACpD,CAAC;IAED,IAAI,CAACb,WAAW,CAACiB,YAAY,GAAIP,KAAK,IAAI;MACxC,IAAI,CAACZ,SAAS,GAAG,KAAK;MACtBO,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAACN,WAAW,CAACF,SAAS,EAAE,CAAC;IAC5D,CAAC;IAED,IAAI,CAACoB,OAAO,EAAE;EAChB;EAEQA,OAAOA,CAAA;IACb,IAAI,CAAClB,WAAW,CAACmB,QAAQ,EAAE;EAC7B;EAEQC,UAAUA,CAAA;IAChB,IAAI,IAAI,CAACpB,WAAW,EAAE;MACpB,IAAI,CAACA,WAAW,CAACqB,UAAU,EAAE;;EAEjC;;;uBA7CWzB,aAAa;IAAA;EAAA;;;YAAbA,aAAa;MAAA0B,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCR1BE,EAAA,CAAAC,cAAA,QAAG;UAAAD,EAAA,CAAAE,MAAA,kBAAW;UAAAF,EAAA,CAAAG,YAAA,EAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}