<div class="sidebar">
    <div class="user-profile">
        <div class="user-avatar">
            <img src="../../../assets/svgs/user.svg?height=40&width=40" alt="Your profile" />
            <span class="status-indicator online"></span>
        </div>
        <h2>Chats</h2>
        <div class="user-actions">
            <!--<i class="material-icons">settings</i>
            <i class="material-icons">star</i>
            <i class="material-icons">vpn_key</i>
            <i class="material-icons">chat</i>
            <i class="material-icons">phone</i>
            <i class="material-icons">videocam</i>
            <i class="material-icons">archive</i>
            <i class="material-icons">help</i>
            <i class="material-icons">more_horiz</i>
            <i class="material-icons">menu</i>-->
            <i class="material-icons action-icon">group</i>
            <i class="material-icons action-icon" (click)="toggleMenu($event)">more_vert</i>

            <div class="dropdown-menu1" [class.show]="showMenu" #dropdownMenu>
                <div class="dropdown-backdrop" (click)="closeMenu()"></div>
                <div class="dropdown-content">
                    <div class="dropdown-item">
                        <span>Nuevo grupo</span>
                    </div>
                    <div class="dropdown-item">
                        <span>Mensajes destacados</span>
                    </div>
                    <div class="dropdown-item">
                        <span>Seleccionar chats</span>
                    </div>
                    <div class="dropdown-item">
                        <span>Configuración</span>
                    </div>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-item" (click)="handleMenuAction('logout')">
                        <span>Cerrar sesión</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="search-container">
        <div class="search-box">
            <i class="material-icons">search</i>
            <input type="text" placeholder="Buscar contactos o chats" [(ngModel)]="searchTerm" />
            <i *ngIf="searchTerm" class="material-icons clear-search" (click)="searchTerm = ''">close</i>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active">Chats</div>
        <div class="tab">Estados</div>
        <div class="tab">Llamadas</div>
    </div>

    <div class="contacts-list">
        <div *ngFor="let contact of filteredContacts" class="contact-item"
            [class.active]="contact.id === activeContact.id" [class.pending]="contact.status === 'pendig_acceptance'"
            (click)="selectContact(contact)">
            <div class="contact-avatar">
                <img [src]="contact.profilePicture" [alt]="contact.name" />
            </div>
            <div class="contact-info">
                <div class="contact-name-time">
                    <h3>{{ contact.name }}</h3>
                    <span class="time">{{ contact.lastSeen | date: 'hh:mm'}}</span>
                </div>
                <div class="contact-message-status">
                    <p *ngIf="contact.status !== 'pendig_acceptance'">{{ contact.name }}</p>
                    <p *ngIf="contact.status === 'pendig_acceptance'" class="pending-text">Solicitud de contacto</p>
                    <div class="message-status" *ngIf="contact.status !== 'pendig_acceptance'">
                        <span *ngIf="true" class="unread-count">{{ '2' }}</span>
                        <i *ngIf="false" class="material-icons read-status">{{
                            getStatusIcon('active') }}</i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="new-chat-button">
        <i class="material-icons">chat</i>
    </div>
</div>